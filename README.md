传感器阵列时空瓶颈感知调度算法
本项目是一个用于模拟大规模传感器阵列数据传输的 Python 仿真平台。其核心是实现一个时空瓶颈感知的调度算法，旨在高效地将传感器产生的数据通过多跳路由，汇聚到移动的地面车辆上。

该仿真旨在解决在动态网络拓扑（车辆移动）和时变链路质量（无线信道变化）下的数据流调度问题，核心优化目标是最大化数据接收量（即最小化丢包率）和减小端到端时延。

算法核心
本仿真采用了一种启发式调度策略，该策略在每个调度时刻（每秒）为每一条活跃的数据流做出决策。其核心思想可以概括为 "贪心选路 + 容量修复 + 轻度拥塞惩罚"：

贪心选路 (Greedy Path Selection):

对于每条数据流，算法会从所有可达的车辆接收点中，就近选择 K 个作为候选出口。

对每个候选出口，算法评估从传感器源头到该出口的"先横后纵"曼哈顿路径，并计算出该路径的瓶颈带宽。瓶颈由路径上 所有传感器间链路的剩余容量、传感器到车的瞬时无线带宽 以及 车辆的聚合接收剩余容量 共同决定。

算法贪心地选择能够提供 最高可行速率 的路径进行传输。如果有多条路径速率相同，则选择 跳数更少（路径更短）的路径以降低时延。

容量修复 (Capacity Reservation):

一旦一条流的路径和速率被确定，该流在本时刻占用的所有链路（传感器间链路、车端链路）的容量都会被相应扣除。

这种"修复"确保了后续流在进行路径选择时，看到的是已被占用的真实剩余网络容量，避免了对同一链路的过度分配。

轻度拥塞惩罚 (Congestion Penalty):

为了模拟车辆接收端在高负载下的不稳定性，模型引入了一个轻度的拥塞惩罚机制。

当一辆车在单个时刻的总调度速率超过其聚合上限的90%时，会根据超出的程度线性引入一个最高可达8%的随机丢包。这模拟了高吞吐量下可能出现的处理瓶颈或数据溢出。

项目特点
参数化仿真环境: 可以在 config.py 中轻松调整网格大小、仿真时长、车辆移动模式、数据流参数、网络容量等。

模块化代码结构: 项目被拆分为五个独立的 Python 文件，职责分明，易于理解和扩展。

详细的性能指标: 自动计算并输出两个核心指标：全网丢包率 (PLR) 和已完成流的平均端到端时延。

深度日志记录: 生成两个 CSV 文件，详细记录了每条流的最终接收量以及每个时刻具体的调度决策（路径和速率）。

结果可视化: 自动生成图表，直观展示每辆车的实时接收性能以及整个传感器网络中水平和垂直链路的负载分布热图。

文件结构
项目由以下五个文件组成：

main.py: 程序主入口。负责组织和调用其他模块，按顺序执行仿真、分析和可视化流程。

config.py: 全局配置文件。存放所有仿真参数，如网络尺寸、车辆数量、带宽、时延等。

simulation.py: 核心仿真器。包含数据流状态定义、环境初始化以及逐秒调度的核心循环逻辑。

utils.py: 工具函数库。提供与模型相关的辅助函数，如车辆位置计算、曼哈顿路径生成、无线带宽模拟等。

analysis.py: 分析与输出模块。负责在仿真结束后进行数据处理、核心指标计算、结果导出为 CSV 以及生成可视化图表。

环境要求
Python 3.6 或更高版本

NumPy

Pandas

Matplotlib

安装
克隆或下载本项目到本地。

打开终端或命令行，进入项目所在的文件夹。

使用 pip 安装所需的依赖库：

bash
pip install numpy pandas matplotlib
如何运行
直接运行 main.py 文件即可启动完整的仿真流程。

bash
python main.py
程序将会在终端中打印初始化、仿真过程信息以及最终的性能指标，并自动弹出三个可视化图表。同时，项目文件夹下会生成两个 CSV 文件。

输出解读
程序成功运行后，您将获得以下输出：

终端输出:

仿真各阶段的状态信息。

最终的核心指标报告，包括：

总流数 (F)

总应发数据量 (Q_total)

车辆接收总量 (Σqi)

丢包率 (PLR)

传输平均时延 (s)

生成的 CSV 文件:

scheduling_plan.csv: 详细的调度日志。

k_time: 调度发生的时刻（秒）。

flow_id: 被调度的流的唯一ID。

source_sensor: 数据流的源传感器坐标 (x, y)。

path_to_car: 数据流的完整传输路径，包括传感器网络中的节点序列和最终接入的车辆ID。

rate_mbps: 在该时刻为该流分配的传输速率。

per_flow_reception.csv: 每条数据流的最终统计。

flow_id: 流的唯一ID。

t_start: 流的产生时刻。

recv_Mb: 该流被车辆成功接收的总数据量（兆比特）。

可视化图表:

Per-second Actual Reception per Car: 折线图，显示了每辆车在仿真过程中每一秒实际接收到的数据速率。

Total Usage of Horizontal Links: 热图，展示了整个仿真期间，网络中所有水平链路累计传输的总数据量，可用于识别水平方向的瓶颈区域。

Total Usage of Vertical Links: 热图，展示了网络中所有垂直链路的累计负载，可用于识别垂直方向的瓶颈区域。

自定义配置
您可以通过修改 config.py 文件来定制仿真环境。以下是一些关键参数：

GRID_X, GRID_Y: 定义传感器网格的尺寸。

SIM_TIME: 仿真总时长（秒）。

CAR_SPEED, CAR_START_Y: 控制车辆移动的模式和初始位置。

CAR_RADIO_RANGE: 车辆与传感器节点的最大通信距离。

H_CAPACITY, V_CAPACITY: 水平和垂直传感器链路的容量。

CAR_CAPACITY: 车辆的聚合接收容量。

FLOW_INTERTIME_MEAN: 控制新数据流产生的平均间隔时间。
